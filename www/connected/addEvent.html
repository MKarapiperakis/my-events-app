<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <!-- <script src="../scripts/maps.js"></script> -->



  <title>Προσθήκη εκδήλωσης</title>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


  <link rel="icon" type="image/x-icon" href="../logo/icon.ico">
  <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/navbar-fixed/">
  <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
  <link rel="icon" type="image/x-icon" href="../logo\icon.ico">
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
  <script src="../js/validate.js" async=""></script>
  <script src="../js/rotate.js"></script>

  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />



  <link href="../css/style.css" rel="stylesheet">
  <link href="../css/signin.css" rel="stylesheet">
  <link href="../css/addEvent.css" rel="stylesheet">

  <style>
    body {
      padding-top: 40px;
      height: 740px;

    }

    #mapHeader {
      margin-top: 10px;
    }


    table img {
      width: 53px;
      height: 53px;
      border-radius: 50%;
      transition: transform .3s ease-in-out;
      opacity: 0.5;
    }


    table img:hover {
      cursor: pointer;


    }

    table {
      max-width: 350px;
      min-width: 350px;
      overflow: scroll;
      margin: auto;
      width: 50% !important;
      font-size: 14px;
    }

    #table1 {
      min-height: 100px;
      max-height: 300px;


    }

    #mapBtn {
      position: fixed;
      bottom: 0;
      right: 0;
      border-radius: 20px;
      width: 60px;
      height: 60px;
      background-image: url("../images/google-maps.png");
      padding: 30px;
      background-size: 80px 80px;
      border: 0px;
      margin: 8px;
      display: none;
      z-index: 1;
    }

    #infoBtn {
      position: fixed;
      bottom: 0;
      right: 0;
      border-radius: 50px;
      width: 60px;
      height: 60px;
      background-image: url("../images/address.png");
      padding: 30px;
      background-size: 60px 60px;
      border: 0px;
      margin: 8px;
      display: none;
      z-index: 1;
    }

    #available {
      display: none;
      width: 200px;
      margin: auto;
      width: 200px !important;
      text-align: center;

    }

    .ui-datepicker table {

      min-width: 18em;
      max-width: 18em;
    }

    #dateHeader {
      display: none;
    }


    .tdClass {
      width: 100px;
    }
  </style>
  <link href="../css/network.css" rel="stylesheet">
  <link href="../css/rotate.css" rel="stylesheet">

</head>

<body class="text-center">
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" id="nav">
    <div class="container-fluid">
      <!--<a class="navbar-brand active"   onclick="scrollToTop()" onmouseover="logoHover()" id = "logo">My Events</a>-->

      <a class="navbar-toggler collapsed border-0" type="button" data-toggle="collapse" data-target="#collapsingNavbar"
        style="background: #343a40">
        <span> </span>
        <span> </span>
        <span> </span>
      </a>
      <div class="collapse navbar-collapse justify-content-between" id="collapsingNavbar">
        <ul class="navbar-nav ">

        </ul>
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Νέα εκδήλωση</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " aria-current="page" href="showEvents.html">Εκδηλώσεις</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " aria-current="page" href="nearEvents.html">Κοντινές εκδηλώσεις</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " aria-current="page" href="editEvent.html">Διαχείριση εκδηλώσεων</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="javascript:end();">Αποσύνδεση</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <main>
    <div class="offline" id="offline">
      <img src="../images/no-wifi.png">
    </div>

    <form class="text-left mx-auto card " id="form" autocomplete="off">
      <h1 class="h3 mb-3 text-center">Προσθήκη Εκδήλωσης</h1>



      <div class="form-floating">
        <input type="text" name="title" id="title" class="form-control mb-4  " placeholder="title" maxLength="30">
        <label for="floatingInput" class="text-start ms-0">Τίτλος Εκδήλωσης</label>
      </div>

      <div class="form-floating">
        <input type="number" pattern="[0-9]*" inputmode="numeric" name="phone" id="phone" class="form-control mb-4  "
          placeholder="phone" maxLength="20">
        <label for="floatingInput" class="text-start ms-0">Τηλέφωνο Επικοινωνίας</label>
      </div>

      <div class="form-floating">
        <textarea class="form-control" id="description" maxlength="100" placeholder="description"></textarea>
        <label class="form-label" for="textAreaExample">Λεπτομέρειες</label>
      </div>

      <label class="text-start ms-0 mt-1 mb-0" style="color: #0d6efd;">Ώρα έναρξης:</label>
      <div class="cs-form">
        <input type="time" id=time class="form-control" />
      </div>

      <label class="text-start ms-0 mt-1 mb-0" style="color: #0d6efd;">Επιλογή κατηγορίας:</label>
      <select class="form-select mt-1" id="category">
        <option>Σινεμά</option>
        <option>Θέατρο</option>
        <option>Μουσική</option>
        <option>Εκθέσεις</option>
        <option>Αθλητισμός</option>
        <option>Ομιλία</option>
        <option>Άλλο</option>
      </select>

      <label class="text-start ms-0 mt-1 mb-0" style="color: #0d6efd;">Είσοδος:</label>

      <div class="form-check" align="left">
        <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked
          onchange="handleChange(this);">
        <label class="form-check-label" for="exampleRadios1">
          Ελεύθερη
        </label>
      </div>
      <div class="form-check" align="left">
        <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2"
          onchange="handleChange(this);">
        <label class="form-check-label" for="exampleRadios2">
          Επί πληρωμή
        </label>
      </div>

      <div class="form-floating" style="display: none" id="pay">
        <input type="number" pattern="[0-9]*" inputmode="numeric" name="payment" id="payment"
          class="form-control mb-4  " placeholder="payment" maxLength="15" value=0>
        <label for="floatingInput" class="text-start ms-0">Ποσό πληρωμής</label>
      </div>





      <button class="btn btn-lg btn-primary w-100 mt-3" type="submit" id="cont" onclick="test3(event)">
        Συνέχεια
      </button>




      <button id="mapBtn" onclick="test2(event)"></button>
      <button id="infoBtn" onclick="hideMap(event)"></button>
    </form>
    <h1 id="mapHeader" style="display: none;text-align: center;font-size: 24px">Επιλογή χώρου</h1>

    <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Αναζήτηση διεύθυνσης...">
    <div class="row justify-content-center table-responsive" id="informations2" style="display:none;">


      <div class="col-auto" style="text-align: center" id="table1">

      </div>
      <label id="resultsNumber"></label>
    </div>





    <form class="text-right mx-auto card " id="infoForm" autocomplete="off"
      style="position: absolute; background-color: transparent;border: 0px;width: 98%">





      <div class="row justify-content-center ">
        <div class="col-auto " id="map" style="display: none;margin-left: 0;margin-top: 5px">

        </div>
        <div class="col-auto informations" id="informations" style="display: none;text-align: center;">
          <table class="table table-striped table-dark">

            <tbody>
              <tr>
                <th scope="row">Όνομα Ιδιοκτήτη</th>
                <td id="owner"></td>
              </tr>
              <tr>
                <th scope="row">Τηλέφωνο Επικοινωνίας</th>
                <td id="contact"></td>
              </tr>
              <tr>
                <th scope="row">Έκταση χώρου</th>
                <td id="area"></td>
              </tr>
              <tr>
                <th scope="row">Διεύθυνση</th>
                <td id="address"></td>
              </tr>
              <tr>
                <th scope="row">Λεπτομέρειες</th>
                <td><textarea class="form-control" id="details" rows="4" readonly></textarea></td>
              </tr>

            </tbody>
          </table>
        </div>
      </div>


      <button class="btn btn-lg btn-primary w-50 mt-2 " type="submit" id="save"
        style="display: none;margin-left: 25vw;margin-top: 20%;position: relative;" onclick="continue2(event)">
        Συνέχεια
      </button>



      <h1 id="dateHeader" style="text-align: center;font-size: 24px">Έλεγχος Διαθεσιμότητας</h1>


      <div class="row justify-content-center table-responsive" id="available" style="display:none;">


        <div class="col-auto  " style="text-align: center">
          <input type="text" id="datepicker" style="text-align: center" maxlength=0; readonly>
        </div>

      </div>
      <button class="btn btn-lg btn-primary  mt-2 " type="submit" id="save2"
        style="display: none;margin-top: 20%;position: relative;" onclick="savePlace(event)">
        Αποθήκευση
      </button>


      <!-- Modal HTML -->
      <div id="myModal" class="modal fade">
        <div class="modal-dialog modal-confirm">
          <div class="modal-content">
            <div class="modal-header justify-content-center">
              <div class="icon-box">
                <i class="material-icons">&#xE5CD;</i>
              </div>
              <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick = "error()" style = "background: transparent;border: 0px;">&times;</button>-->
            </div>
            <div class="modal-body text-center">
              <h4>Σφάλμα!</h4>
              <p>Πρέπει να επιλέξεις ημερομηνία και ώρα που θα λάβει χώρα η εκδήλωσή σου.</p>
              <button class="btn btn-success" data-dismiss="modal" onclick="error(event)">ΟΚ</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal2 -->
      <div class="modal fade" id="myModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
        style="margin-top: 35vh">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel" align: center>Επιτυχής προσθήκη</h5>

            </div>
            <div class="modal-body" style="text-align: center">
              Η νέα εκδήλωση προστέθηκε με επιτυχία.
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="success()">ΟΚ</button>
            </div>
          </div>
        </div>
      </div>

  </main>


  <script type="text/javascript" src="../cordova.js"></script>
  <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/ready.js" async=""></script>
  <script src="../js/network_status.js" async=""></script>
  <script>

    function end() {
      localStorage.clear();
      window.location.replace("../sign_in.html");
    }

    function error(event) {
      event.preventDefault();
      $('#myModal').modal('hide');
    }

    function success() {
      location.reload();
    }
    var placeId;
    function continue2(event) {

      event.preventDefault();
      document.getElementById("infoBtn").style.display = "none";
      document.getElementById("mapBtn").style.display = "none";
      document.getElementById("save").style.display = "none";
      document.getElementById("myInput").style.display = "none";
      document.getElementById("dateHeader").style.display = "block";
      document.getElementById("save2").style.display = "block";
      document.getElementById("save2").scrollIntoView(true);
      //alert(idList2.length);

      for (var i = 0; i < idList2.length; i++) {
        document.getElementById("btn" + i).style.display = "none";
      }

      document.getElementById("available").style.display = "inline";
    }
    function hideMap(event) {
      event.preventDefault();
      document.body.style = "height: 1200px";
      document.getElementById("table1").style.display = "block";
      document.getElementById("myInput").style.display = "block";
      document.getElementById("infoBtn").style.display = "none";
      document.getElementById("mapBtn").style.display = "block";
      document.getElementById("informations").style.display = "none";

      document.getElementById("map").style.display = "none";

      if (toggle == false)
        document.getElementById("save").disabled = true;
      else
        document.getElementById("save").disabled = false;
      document.getElementById("save").style.display = "block";
    }
    var toggle = false;
    var toggleId = "";
    var selectedAddress = "";
    function selectButton(placeId, btnNumber, address) {
      if (toggle == false) {
        toggle = true;
        toggleId = placeId;
        document.getElementById("btn" + btnNumber).style = "opacity: 1";
        document.getElementById("tr" + btnNumber).style = "background-color: skyblue";
        document.getElementById("save").disabled = false;
        selectedAddress = address;
        this.placeId = placeId;
      }
      else if (toggle == true && toggleId == placeId) {
        toggle = false;
        toggleId = "";
        document.getElementById("btn" + btnNumber).style = "opacity: 0.5";
        document.getElementById("tr" + btnNumber).style = "background-color: transparent";
        document.getElementById("save").disabled = true;
      }

      //alert(btnNumber + "," + placeId);
    }

    function myFunction() {
      var counter = 0;
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("table1");

      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[1];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
            counter++;
          } else {
            tr[i].style.display = "none";

          }
        }
      }

      if (counter == 0)
        document.body.style = "height: 1000px";
      else
        document.body.style = "height: 1200px";


      document.getElementById("resultsNumber").innerHTML = counter + " αποτελέσματα";
      document.getElementById("resultsNumber").scrollIntoView(true);


    }



    setInterval(getDate, 1000);

    var placeIdList = [];
    var dateList = [];
    var disabledDates = [];



    function getDate() {
      //alert("here");
      url = "http://myuopevents.com/php/getAvailability.php";
      placeIdList = [];
      dateList = [];
      $.ajax({
        type: "GET", crossDomain: true, cache: false,
        url: url,
        dataType: 'jsonp',
        jsonp: "callback",
        success: function (data) {
          disabledDates = [];
          var len = data.length;

          for (var i = 0; i < len; i++) {
            placeIdList.push(data[i].placeID);
            dateList.push(data[i].selectedDate);
          }

          if (placeId != null)      //if user select a marker
          {

            for (var i = 0; i < placeIdList.length; i++) {
              if (placeIdList[i] == placeId) {

                disabledDates.push(dateList[i]);
              }


            }
            //alert(disabledDates);
            $("#datepicker").datepicker({
              minDate: 0,                                      //disable past dates
              beforeShowDay: function (date) {                  //disable unavailable dates
                var string = jQuery.datepicker.formatDate('mm/dd/yy', date);
                return [disabledDates.indexOf(string) == -1]
              }


            });

            $("#datepicker").datepicker("refresh");       //Redraw the date picker, after having made some external modifications.
          }

        }//end of success
      }); //end of ajax
    }





    function handleChange(src) {
      //alert(src.value);
      if (src.value == "option2") {
        document.getElementById("pay").style.display = "block";
      }
      else {
        document.getElementById("pay").style.display = "none";
        document.getElementById("payment").value = 0;
      }
    }




    function savePlace(event) {
      event.preventDefault();
      //alert("save?");
      var name = localStorage.getItem("Name");
      var title = document.getElementById("title").value;
      var phone = document.getElementById("phone").value;
      var description = document.getElementById("description").value;
      var category = document.getElementById("category").value;
      var payment = document.getElementById("payment").value;
      var date = document.getElementById("datepicker").value;
      var time = document.getElementById("time").value;
      //alert(time);

      if (date == "" || time == "") {
        $('#myModal').modal('show');
      }
      else    //we are ready to add the event
      {
        var url = "http://myuopevents.com/php/cordovaAddEvent.php";
        var url2 = "http://myuopevents.com/php/cordovaAddAvailability.php";





        var dataString = "name=" + name + "&title=" + title + "&phone=" + phone + "&description=" + description + "&category=" + category + "&payment=" + payment + "&date=" + date + "&placeId=" + placeId + "&time=" + time;
        var dataString2 = "date=" + date + "&placeId=" + placeId;

        $.ajax({
          type: "GET", crossDomain: true, cache: false,
          url: url,
          data: dataString,
          dataType: 'jsonp',
          jsonp: "callback",
          success: function (data) {
            if (data[0].answer == "success") {
              $.ajax({
                type: "GET", crossDomain: true, cache: false,
                url: url2,
                data: dataString,
                dataType: 'jsonp',
                jsonp: "callback",
                success: function (data2) {
                  if (data2[0].answer == "success") {
                    //alert("success");
                    $('#myModal2').modal('show');
                    // location.reload();
                  }
                  else {
                    alert("error in 2nd Ajax");
                  }
                } //end of 2nd success
              }); //end of 2nd Ajax
            }
            else {
              alert("error in 1st Ajax");

            }

          }//end of 1st success
        }); //end of 1st AJAX

      }
    }
    //setInterval( test, 4000 );  


    let map;
    var nameList2 = [];
    var addressList2 = [];
    var idList2 = [];


    function test3(event) {
      event.preventDefault();
      document.getElementById("mapBtn").style.display = "block";
      document.getElementById("cont").style.display = "none";
      document.getElementById("save").style.display = "inline-block";
      document.body.style = "height: 1200px";
      document.getElementById("save").disabled = true;



      document.getElementById("mapHeader").style.display = "block";
      document.getElementById("myInput").style.display = "block";
      document.getElementById("informations2").style.display = "inline-block";





      var url5 = "http://myuopevents.com/php/getPlace.php";




      $.ajax({
        type: "GET",
        url: url5,
        dataType: 'jsonp',
        jsonp: "callback",

        success: function (data) {

          var len = data.length;

          for (var i = 0; i < len; i++) {
            nameList2.push(data[i].name);
            addressList2.push(data[i].address);
            idList2.push(data[i].id);
          }




          var myParent = document.getElementById('table1');
          var table = document.createElement('table');
          table.id = "table1";     //giving id to the new table

          var thead = document.createElement('thead');
          thead.id = "head";     //giving id to the new table


          var tr1 = document.createElement('tr');

          var th1 = document.createElement('th');
          var th2 = document.createElement('th');
          var th3 = document.createElement('th');

          var text1 = document.createTextNode('Ιδιοκτήτης');
          var text2 = document.createTextNode('Διεύθυνση');
          var text3 = document.createTextNode('');


          th1.appendChild(text1);
          th2.appendChild(text2);
          th3.appendChild(text3);



          tr1.appendChild(th1);
          tr1.appendChild(th2);
          tr1.appendChild(th3);



          thead.appendChild(tr1);

          table.appendChild(thead);


          var tbody = document.createElement('tbody');
          for (var i = 0; i < nameList2.length; i++) {



            var tr = document.createElement('tr');
            tr.id = "tr" + i;

            var td1 = document.createElement('td');
            var td2 = document.createElement('td');
            var td3 = document.createElement('td');



            var text1 = document.createTextNode(nameList2[i]);
            var text2 = document.createTextNode(addressList2[i]);
            var address = "'" + addressList2[i].replaceAll(",", "-") + "'";

            td1.appendChild(text1);
            td2.appendChild(text2);
            td3.innerHTML = "<img src=\"../images/check-mark.png\"  id = \"btn" + i + "\" onclick = \"selectButton(" + idList2[i] + "," + i + "," + address + ")\">  ";

            tr.appendChild(td1);
            tr.appendChild(td2);
            tr.appendChild(td3);

            tbody.appendChild(tr);

          }



          table.appendChild(tbody);



          myParent.appendChild(table);
          document.getElementById("table1").className = "table table-responsive";
          document.getElementById("head").className = "table-dark";


          document.getElementById("save").scrollIntoView(true);


        }   //end of success
      });    //end of AJAX



    }   //end of function

    function test2(event) {
      event.preventDefault();
      document.body.style = "height: 900px";
      document.getElementById("table1").style.display = "none";
      document.getElementById("myInput").style.display = "none";
      document.getElementById("infoBtn").style.display = "block";
      document.getElementById("mapBtn").style.display = "none";


      document.getElementById("save").disabled = true;
      document.getElementById("map").style.display = "block";
      document.getElementById("mapHeader").style.display = "block";
      document.getElementById("cont").style.display = "none";
      document.getElementById("save").style.display = "block";
      document.getElementById("save").scrollIntoView(true);

      latitude = 39.617607961516065;
      longitude = 22.69325295563209;
      selected_zoom = 7;

      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: latitude, lng: longitude },
        zoom: selected_zoom,
        disableDefaultUI: true,
        zoomControl: true,
        mapTypeControl: true,
        streetViewControl: true,
        overviewMapControl: true,
        gestureHandling: 'greedy'
      });

      test();
    }

    function test() {

      var lat1List = [];
      var lat2List = [];
      var lat3List = [];
      var lat4List = [];
      var long1List = [];
      var long2List = [];
      var long3List = [];
      var long4List = [];
      var marklatList = [];
      var marklongList = [];
      var descriptionList = [];
      var phoneList = [];
      var nameList = [];
      var maptypeList = [];
      var idList = [];
      var areaSizeList = [];
      var addressList = [];
      var url = "http://myuopevents.com/php/getPlace.php";



      $.ajax({
        type: "GET",
        url: url,
        dataType: 'jsonp',
        jsonp: "callback",

        success: function (data) {

          var len = data.length;



          for (var i = 0; i < len; i++) {
            lat1List.push(data[i].lat1);
            lat2List.push(data[i].lat2);
            lat3List.push(data[i].lat3);
            lat4List.push(data[i].lat4);
            long1List.push(data[i].long1);
            long2List.push(data[i].long2);
            long3List.push(data[i].long3);
            long4List.push(data[i].long4);
            marklatList.push(data[i].marklat);
            marklongList.push(data[i].marklong);
            descriptionList.push(data[i].descr);
            phoneList.push(data[i].phone);
            nameList.push(data[i].name);
            maptypeList.push(data[i].maptype);
            idList.push(data[i].id);
            areaSizeList.push(data[i].areaSize);
            addressList.push(data[i].address);
          }   //end of loop





          for (var i = 0; i < marklatList.length; i++) {

            if (maptypeList[i] == "default")     //simple marker
            {
              latitude = parseFloat(marklatList[i]);
              longitude = parseFloat(marklongList[i]);

              var marker = new google.maps.Marker({
                position: { lat: latitude, lng: longitude },
                title: idList[i],
                animation: google.maps.Animation.DROP
              });

              marker.setMap(map);

              //every time i click a marker, i have his id
              google.maps.event.addListener(marker, 'click', (function (marker, i) {
                return function () {

                  document.getElementById("resultsNumber").style.display = "none";
                  document.getElementById("save").disabled = false;
                  document.getElementById("infoBtn").style.display = "none";
                  placeId = marker.title;
                  document.getElementById("save").style.visibility = "visible";
                  var num;
                  for (var i = 0; i < idList.length; i++) {
                    if (idList[i] == marker.title)
                      num = i;

                  }

                  if (nameList[num] != "")
                    document.getElementById("owner").innerHTML = nameList[num];
                  else
                    document.getElementById("owner").innerHTML = "χωρίς όνομα";

                  if (phoneList[num] != "0")
                    document.getElementById("contact").innerHTML = phoneList[num];
                  else
                    document.getElementById("contact").innerHTML = "χωρίς τηλέφωνο";

                  if (areaSizeList[num] != "")
                    document.getElementById("area").innerHTML = "";
                  else
                    document.getElementById("area").innerHTML = "";

                  if (descriptionList[num] != "")
                    document.getElementById("details").innerHTML = (descriptionList[num]);
                  else
                    document.getElementById("details").innerHTML = "χωρίς λεπτομέρειες";

                  if (addressList[num] != "")
                    document.getElementById("address").innerHTML = (addressList[num]);
                  else
                    document.getElementById("address").innerHTML = "χωρίς Διεύθυνση";

                  /*var disabledDates = ["2015-11-28","2015-11-14","2022-07-28"]

                 $("#datepicker").datepicker({
                     minDate: 0,     //disable past dates
                     beforeShowDay: function(date){  //disable anavailable dates
                         var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
                         return [ disabledDates.indexOf(string) == -1 ]
                     }
                 });
                 */

                  document.getElementById("informations").style.display = "block";
                  var pref_zoom = map.getZoom();
                  map.setZoom(pref_zoom + 3);
                  map.setCenter(marker.position);

                }
              })(marker, i));
            }
            else if (maptypeList[i] == "custom")   //polygon
            {
              //alert(i);
              const Coords = [
                { lat: parseFloat(lat1List[i]), lng: parseFloat(long1List[i]) },
                { lat: parseFloat(lat2List[i]), lng: parseFloat(long2List[i]) },
                { lat: parseFloat(lat3List[i]), lng: parseFloat(long3List[i]) },
                { lat: parseFloat(lat4List[i]), lng: parseFloat(long4List[i]) },
              ];
              // Construct the polygon.
              const Event = new google.maps.Polygon({
                paths: Coords,
                strokeColor: "#FF0000",
                strokeOpacity: 0.3,
                strokeWeight: 1,
                fillColor: "#FF0000",
                fillOpacity: 0.4,
              });

              Event.setMap(map);


              latitude = parseFloat(marklatList[i]);
              longitude = parseFloat(marklongList[i]);

              var marker = new google.maps.Marker({
                position: { lat: latitude, lng: longitude },
                title: idList[i],
                icon: "https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",
                animation: google.maps.Animation.DROP
              });

              marker.setMap(map);


              google.maps.event.addListener(marker, 'click', (function (marker, i) {
                return function () {
                  document.getElementById("resultsNumber").style.display = "none";
                  document.getElementById("save").disabled = false;
                  document.getElementById("infoBtn").style.display = "none";
                  placeId = marker.title;
                  document.getElementById("save").style.visibility = "visible";
                  //alert(marker.title);
                  var num;
                  for (var i = 0; i < idList.length; i++) {
                    if (idList[i] == marker.title)
                      num = i;

                  }

                  if (nameList[num] != "")
                    document.getElementById("owner").innerHTML = nameList[num];
                  else
                    document.getElementById("owner").innerHTML = "χωρίς όνομα";

                  if (phoneList[num] != "0")
                    document.getElementById("contact").innerHTML = phoneList[num];
                  else
                    document.getElementById("contact").innerHTML = "χωρίς τηλέφωνο";

                  if (areaSizeList[num] != "")
                    document.getElementById("area").innerHTML = parseInt(areaSizeList[num]) + " τετραγωνικά μέτρα";
                  else
                    document.getElementById("area").innerHTML = "<strong></strong>";

                  if (descriptionList[num] != "")
                    document.getElementById("details").innerHTML = (descriptionList[num]);
                  else
                    document.getElementById("details").innerHTML = "χωρίς λεπτομέρειες";

                  if (addressList[num] != "")
                    document.getElementById("address").innerHTML = (addressList[num]);
                  else
                    document.getElementById("address").innerHTML = "χωρίς Διεύθυνση";



                  document.getElementById("informations").style.display = "block";
                  var pref_zoom = map.getZoom();
                  map.setZoom(pref_zoom + 3);
                  map.setCenter(marker.position);

                }
              })(marker, i));
            }
          }


        }   //end of success
      });    //end of AJAX


    }


  </script>

















  <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=<your key here>&callback=initMap">
    </script>
</body>

</html>